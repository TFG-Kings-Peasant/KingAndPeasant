
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
}

model User {
  idUser  Int      @id @default(autoincrement())
  name    String   @unique
  email   String   @unique
  password  String
  games   Int      @default(0)
  wins    Int      @default(0)
  losses  Int      @default(0)
  createdAt  DateTime  @default(now())
  lobbiesAsPlayer1 Lobby[] @relation("Player1")
  lobbiesAsPlayer2 Lobby[] @relation("Player2")
}

model Lobby {
  id     Int      @id @default(autoincrement())
  name  String   @unique
  createdAt   DateTime @default(now())
  status   LobbyStatus @default(WAITING)
  privacy  LobbyPrivacy @default(PUBLIC)
  player1Id   Int
  player2Id   Int?
  player1     User     @relation("Player1", fields: [player1Id], references: [idUser])
  player2     User?    @relation("Player2", fields: [player2Id], references: [idUser])
}

enum LobbyPrivacy {
  PUBLIC
  PRIVATE
}

enum LobbyStatus {
  WAITING
  ONGOING
}